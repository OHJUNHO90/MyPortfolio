<?xml version="1.0" encoding="utf-8" ?>
<root>

	<connectionString>

<!-- Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=192.168.0.224)(PORT=1521)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=ORCL)));User Id=KHSMTDBUSR;Password=Rhdwjd!2xla; Connection Timeout= 10; -->
    <!--Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=dev.teia.co.kr)(PORT=1521)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=ORCL)));User Id=KHSMTDBADM;Password=Rhdwjd!2xla; Connection Timeout= 10;-->
    <!-- <![CDATA[ -->
			<!-- Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=10.166.134.233)(PORT=1521)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=KHSMTDB)));User Id=KHSMTDBUSR;Password=Rhdwjd!2xla; Connection Timeout= 10; -->
		<!-- ]]> -->
<!-- 		<![CDATA[
					Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=10.166.134.233)(PORT=1521)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=KHSMTDB)));User Id=KHSMTDBUSR;Password=Rhdwjd!2xla; Connection Timeout= 10;
		]]> -->
		<![CDATA[
Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=dev.teia.co.kr)(PORT=1521)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=ORCL)));User Id=KHS;Password=Rhdwjd!2xla; Connection Timeout= 10;
		]]> 

	</connectionString>
	

	<query id="confList" type="select">
		<![CDATA[
			SELECT TRIM(A.CONF_CD) AS CONF_CD, A.CONF_VAL, A.CONF_VAL_TY, A.CONF_CD_NM, A.CONF_DESC FROM TB_ST_CONF A ORDER BY A.CONF_CD ASC
		]]>
	</query>

	<query id="tagList" type="select">
		<![CDATA[
		SELECT A.*, FN_ST_CD_NM('TAG_TY', A.TAG_TY, 'ko') AS TAG_TY_NM, 
				CASE WHEN A.LP_SEND_PERI IS NULL THEN '' ELSE  '[' || A.LP_SEND_PERI || '] ' || FN_ST_CD_NM('LP_SEND_PERI', A.LP_SEND_PERI, 'ko')
				END AS LP_SEND_PERI_NM
			FROM (
				SELECT
					A.*,
					ROWNUM as RNUM
				FROM (
					SELECT
						A.TAG_ID,
						--A.TAG_TY,
						NVL(A.TAG_TY, ' ') AS TAG_TY, 
						A.TOOL_ID,
						A.INPT_YMD,
						A.REMK,
						A.DUSE_YN,
						A.DUSE_YMD,
						TO_CHAR((CASE WHEN A.UPD_DT IS NULL THEN A.REG_DT ELSE A.UPD_DT END), 'YYYY-MM-DD HH24:MI:SS')    AS LAST_DT,
						A.LP_SEND_PERI
					FROM TB_BI_TAG A
					WHERE 1 = 1 
					AND A.DUSE_YN = 'N'
					ORDER BY A.TAG_ID DESC
					) A
				WHERE ROWNUM <= 1000000
				) A
			WHERE RNUM >= 1
		]]>
	</query>

	<query id="carWkspList" type="select">
		<![CDATA[
		SELECT
			A.*,
			TO_CHAR((CASE WHEN A.UPD_DT IS NULL THEN A.REG_DT ELSE A.UPD_DT END), 'YYYY-MM-DD HH24:MI:SS') AS LAST_DT,
			(SELECT PROC_NM FROM TB_BI_PROC B WHERE B.PROC_CD = A.PROC_CD) AS PROC_NM,
			(SELECT CAR_IMG    FROM TB_BI_CAR C WHERE C.CAR_CD = A.CAR_CD) AS CAR_IMG,
			(SELECT CAR_L FROM TB_BI_CAR C WHERE C.CAR_CD = A.CAR_CD) AS CAR_L,
			(SELECT CAR_W FROM TB_BI_CAR C WHERE C.CAR_CD = A.CAR_CD) AS CAR_W,
			A.CAR_CD || A.PROC_CD || A.SEQ AS WKSP_SID,
			FN_ST_CD_NM('CM_CAR_CD', (SELECT CM_CAR_CD FROM TB_BI_CAR C WHERE C.CAR_CD = A.CAR_CD), 'ko')  AS CM_CAR_CD_NM
		FROM (
			SELECT
				A.*,
				ROWNUM as RNUM
			FROM (
				SELECT
					A.PROC_CD,
					A.CAR_CD,
					A.SEQ,
					A.POS_X,
					A.POS_Y,
					A.WKSP_NM,
					A.WKSP_W,
					A.WKSP_H,
					A.REG_ID,
					A.REG_DT,
					A.UPD_ID,
					A.UPD_DT,
					A.TOOL_ID,
					A.SUB_TOOL_ID,
					A.WKSP_ID
				FROM TB_BI_CAR_WKSP A
				WHERE 1 = 1
				) A
			WHERE ROWNUM <= 1000000
			) A
		WHERE RNUM >= 1
		]]>
	</query>

	<query id="toolList" type="select">
		<![CDATA[
		SELECT
			A.*,
			(SELECT PROC_NM FROM TB_BI_PROC B WHERE B.PROC_CD = A.PROC_CD) AS PROC_NM,
			FN_ST_CD_NM('LINE_CD', A.LINE_CD, 'ko')    AS LINE_CD_NM,
			TO_CHAR((CASE WHEN A.UPD_DT IS NULL THEN A.REG_DT ELSE A.UPD_DT END), 'YYYY-MM-DD HH24:MI:SS')    AS LAST_DT,
			FN_ST_CD_NM('TOOL_TY', A.TOOL_TY, 'ko')    AS TOOL_TY_NM,
			FN_ST_CD_NM('TOOL_MAKE_CD', A.TOOL_MAKE, 'ko')  AS TOOL_MAKE_NM
		FROM (
			SELECT
				A.*,
				ROWNUM as RNUM
				FROM (
				SELECT
				A.TOOL_ID,
				A.TOOL_TY,
				A.DUSE_YN,
				A.TOOL_NM,
				A.LINE_CD,
				A.PROC_CD,
				A.TOOL_SN,
				A.INPT_YMD,
				A.DUSE_YMD,
				A.DUSE_DESC,
				A.REMK,
				A.REG_ID,
				A.REG_DT,
				A.UPD_ID,
				A.UPD_DT,
				A.TOOL_IP,
				A.TOOL_PORT,
				A.TOOL_MAKE,
				A.TOOL_MODEL,
				A.TOOL_CUR_TIME,
				A.TOOL_MODL_CD,
				0 AS PIX_POS_X,--A.PIX_POS_X,
				A.PIX_POS_Y,
				0 AS PIX_POS_Z --A.PIX_POS_Z
			FROM TB_BI_TOOL  A
			WHERE 1 = 1
			ORDER BY A.INPT_YMD DESC
			) A
			WHERE ROWNUM <= 1000000
		) A
		WHERE RNUM >= 1
		]]>
	</query>

	<query id="carList" type="select">
		<![CDATA[
		SELECT
				A.*,
				FN_ST_CD_NM('CM_CAR_CD', A.CM_CAR_CD, 'ko') AS CM_CAR_CD_NM,
				TO_CHAR((CASE WHEN A.UPD_DT IS NULL THEN A.REG_DT ELSE A.UPD_DT END), 'YYYY-MM-DD HH24:MI:SS')    AS LAST_DT
			FROM (
				SELECT
					A.*,
					ROWNUM as RNUM
				FROM (
					SELECT
						A.CAR_CD,
						A.CM_CAR_CD,
						A.CAR_L,
						A.CAR_W,
						A.CAR_H,
						ROUND(A.TAG_POS_x,4) AS TAG_POS_x,
						ROUND(A.TAG_POS_Y,4) AS TAG_POS_Y,
						ROUND(A.TAG_POS_Z,4) AS TAG_POS_Z,
						A.CAR_IMG,
						A.REMK,
						A.REG_ID,
						A.REG_DT,
						A.UPD_ID,
						A.UPD_DT,
						A.TAG_POINT
					FROM TB_BI_CAR A
					WHERE 1 = 1
					ORDER BY CAR_CD ASC, CM_CAR_CD ASC
					) A
				WHERE ROWNUM <= 1000000
				) A
			WHERE RNUM >= 1
		]]>
	</query>

	<query id="procList" type="select">
		<![CDATA[
		SELECT
			A.*,
			FN_BI_LINE_NM( A.LINE_CD)        AS LINE_CD_NM,
			FN_ST_CD_NM('PROC_TY', A.PROC_TY_CD, 'ko')        AS PROC_TY_NM,
			TO_CHAR((CASE WHEN A.UPD_DT IS NULL THEN A.REG_DT ELSE A.UPD_DT END), 'YYYY-MM-DD HH24:MI:SS')    AS LAST_DT
		FROM (
			SELECT
				A.*,
				ROWNUM as RNUM
			FROM (
				SELECT
					A.LINE_CD,
					A.PROC_CD,
					A.PROC_NM,
					A.PROC_TY_CD,
					A.PROC_Z,
					A.SORT_NO,
					A.CTRL_ID,
					ROUND(A.POS_X,4) AS POS_X,
					ROUND(A.POS_Y,4) AS POS_Y,
					ROUND(A.POS_Z,4) AS POS_Z,
					A.PROC_W,
					A.PROC_H,
					ROUND(A.IN_POS_X,4) AS IN_POS_X,
					A.OUT_POS_X,
					A.MONT_TOP_PX,
					A.MONT_LEFT_PX,
					A.MDLW_RULE,
					A.REG_DT,
					A.UPD_DT,
					A.WAIT_SEC,
					A.PROC_ANGL
				FROM TB_BI_PROC A
				WHERE 1 = 1
				ORDER BY A.SORT_NO ASC, A.PROC_CD ASC
				) A
			  WHERE ROWNUM <= 1000000
			 ) A
		WHERE RNUM >= 1
		]]>
	</query>

	<query id="ctrlList" type="select">
		<![CDATA[
		SELECT
        A.*,
        TO_CHAR((CASE WHEN A.UPD_DT IS NULL THEN A.REG_DT ELSE A.UPD_DT END), 'YYYY-MM-DD HH24:MI:SS')    AS LAST_DT
        FROM (
            SELECT
                A.*,
                ROWNUM as RNUM
            FROM (
                SELECT
                    A.CTRL_ID,
                    A.IP_ADDR,
                    A.SVR_PORT,
                    A.CLNT_PORT,
                    ROUND(A.POS_X,2) as POS_X,
                    ROUND(A.POS_Y,2) as POS_Y,
                    ROUND(A.POS_Z,2) as POS_Z,
                    A.REG_ID,
                    A.REG_DT,
                    A.UPD_ID,
                    A.UPD_DT,
                    A.LS_CD
                FROM TB_BI_CTRL A
                WHERE 1 = 1
                ORDER BY A.CTRL_ID DESC
            ) A
        WHERE ROWNUM <= 1000000
        ) A
    WHERE RNUM >= 1
		]]>
	</query>
    
    <query id="lineList" type="select">
		<![CDATA[
		SELECT
			A.*,
			TO_CHAR((CASE WHEN A.UPD_DT IS NULL THEN A.REG_DT ELSE A.UPD_DT END), 'YYYY-MM-DD HH24:MI:SS')    AS LAST_DT
			FROM (
			SELECT
				A.*,
				ROWNUM as RNUM
			FROM (
				SELECT
					A.LINE_CD,
					A.LINE_NM,
					A.CTRL_ID,
					A.SORT_NO,
					A.POS_X,
					A.POS_Y,
					A.STR_COR_X,
					A.STR_COT_Y,
					A.MDLW_RULE,
					A.FILE_ID,
					A.PATH_CD,
					A.LINE_SPD,
					A.REG_ID,
					A.REG_DT,
					A.UPD_ID,
					A.UPD_DT,
					A.LINE_PITCH,
					B.FILE_NM,
					B.FILE_REAL_NM,
					B.FILE_PATH,
					B.FILE_SIZE
				FROM TB_BI_LINE A 
				LEFT JOIN TB_ST_FILE B 
					ON A.FILE_ID = B.FILE_ID
				WHERE 1 = 1
				ORDER BY A.SORT_NO ASC, A.LINE_CD ASC
				) A
			WHERE ROWNUM <= 1000000
			) A
			WHERE RNUM >= 1
		]]>
	</query>
    
    	<query id="pointList" type="select">
		<![CDATA[
			SELECT
				A.CD_GRP,
				A.CD,
				NVL(B.CD_NM, A.CD_NM) AS CD_NM ,
				A.UP_CD,
				A.CD_VAL,
				A.USE_YN,
				A.SORT_NO,
				A.CD_DESC,
				A.REG_DT,
				A.UPD_DT
			FROM TB_ST_CD A
			LEFT JOIN TB_ST_CD_MSG B
			ON
				A.CD_GRP = B.CD_GRP
				AND A.CD = B.CD
				AND B.LANG_CD = 'ko'
			WHERE A.CD_GRP = 'VC_POINT_INFO'
			AND A.USE_YN = 'Y'
		]]>
	</query>
    <query id="posList" type="select">
		<![CDATA[
			SELECT 
				POS_ID,
				TAG_ID, 
				BODY_NO,
				POS_X,
				POS_Y, 
				POS_Z,
				CAR_STAT,
				SUB_LINE_CD,
				LINE_CD,
				PATH_INDEX
			FROM TB_RT_POS
			ORDER BY POS_ID
		]]>
	</query>
    
    <query id="messageList" type="select">
		<![CDATA[
			SELECT A.MSG_KEY_VAL, C.VAL_ID, C.VAL_TYPE, C.VAL_LEN 
			FROM TB_SK_MSG_BODY A 
			INNER JOIN TB_SK_MSG_BODY_DT B ON A.MSG_ID = B.MSG_ID 
			INNER JOIN TB_SK_MSG_VAL C ON B.MSG_DT_VAL_ID = C.VAL_ID 
			WHERE A.MSG_KEY_TYPE = 'BYTE'
			ORDER BY A.MSG_KEY_VAL, B.MSG_DT_ORD
		]]>
	</query>

	<query id="socketList" type="select">
		<![CDATA[
			SELECT * FROM TB_SK_PKG_SK 
			WHERE PKG_ID = 'VCC'
		]]>
	</query>	
	
	<query id="socketINList" type="select">
		<![CDATA[
			SELECT PKG_ID,IN_SK_ID,IN_MSG_ID, SK_IN_SEQ,
			(SELECT MSG_KEY_VAL FROM TB_SK_MSG_BODY WHERE IN_MSG_ID = MSG_ID) as IN_MSG_VAL, BZ_METHOD
			FROM TB_SK_PKG_SK_IN WHERE PKG_ID = 'VCC'
		]]>
	</query>
	
		<query id="socketOUTList" type="select">
		<![CDATA[
			SELECT A.OUT_SK_ID, A.OUT_MSG_ID, A.USE_YN, A.SK_IN_SEQ, B.MSG_KEY_VAL AS OUT_MSG_VAL
			FROM TB_SK_PKG_SK_OUT A INNER JOIN TB_SK_MSG_BODY B 
			ON A.OUT_MSG_ID = B.MSG_ID  AND B.MSG_KEY_TYPE = 'BYTE' AND A.USE_YN = 'Y'
		]]>
	</query>
	
</root>

